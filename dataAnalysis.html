<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Advanced Data Analysis - Birth Records</title>

  <!-- Bootstrap & DataTables CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://cdn.datatables.net/1.13.5/css/dataTables.bootstrap5.min.css" rel="stylesheet"/>

  <!-- Optional: your existing style.css -->
  <link rel="stylesheet" href="style.css"/>

  <!-- Tailwind (safe prefix to avoid Bootstrap conflicts) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      prefix: 'tw-',
      theme: { extend: { boxShadow: { soft: '0 10px 30px rgba(2,8,23,.08)' } } }
    }
  </script>

  <style>
    /* ======= Top menu (fixed sizing, no wrapping on desktop) ======= */
    .brc-header { background:#0676A8; color:#fff; }
    .brc-wrap { max-width: 1400px; margin: 0 auto; padding: 12px 16px; display:flex; align-items:center; gap:16px; }
    .brc-brand { font-weight: 800; font-size: 26px; letter-spacing: .2px; white-space: nowrap; }

    .brc-nav {
      display:flex; align-items:center; gap:22px; margin-left:auto;
      flex-wrap: nowrap;                 /* keep one line */
      white-space: nowrap;               /* prevent per-link wrapping */
    }
    .brc-link{
      color:#fff; text-decoration:none;  /* remove default underline */
      font-weight:700;
      font-size:16px;                    /* uniform size */
      line-height:1.2;
      display:inline-block;
      padding:4px 0;                     /* click target height */
      border-bottom:2px solid transparent; /* for custom underline */
    }
    .brc-link:hover,
    .brc-link:focus{
      text-decoration:none;              /* still no native underline */
      border-bottom-color: rgba(255,255,255,.85); /* neat hover underline */
    }
    .brc-link.active{
      border-bottom-color:#fff;          /* persistent indicator for current page */
    }

    .brc-toggle { display:none; margin-left:auto; background:transparent; border:0; color:#fff; font-size:22px; }

    /* Mobile: menu becomes a stacked panel; allow wrapping here */
    @media (max-width: 992px) {
      .brc-toggle { display:block; }
      .brc-nav {
        display:none; position:absolute; top:60px; right:16px; left:16px;
        background:#0676A8; padding:12px; border-radius:10px; flex-direction:column;
        gap:10px; z-index:20; white-space:normal;  /* allow wrapping on small screens */
      }
      .brc-nav.open { display:flex; }
      .brc-wrap { position:relative; }
      .brc-link { font-size:16px; border-bottom:0; }
      .brc-link:hover, .brc-link:focus { border-bottom:0; text-decoration:underline; }
    }

    /* ======= Page cards / charts ======= */
    .fig { border-radius:16px; background:#fff; padding:1rem 1rem .75rem; box-shadow:0 6px 20px rgba(0,0,0,.06); height:100%; }
    .fig h6 { margin:0 0 .75rem 0; font-weight:700; }
    .figcaption { color:#6b7280; font-size:.9rem; margin-top:.5rem; }
    .canvas-tall   { min-height: 360px; }
    .canvas-medium { min-height: 300px; }
    .canvas-short  { min-height: 220px; }
    .legend-dot { display:inline-block; width:.8rem; height:.8rem; border-radius:50%; margin-right:.35rem; vertical-align:middle; }
  </style>
</head>
<body>
  <!-- ======= Header ======= -->
  <header class="brc-header">
    <div class="brc-wrap">
      <div class="brc-brand">Birth Record Communication System</div>
      <button id="menuToggle" class="brc-toggle" aria-label="Toggle menu">â˜°</button>
      <nav id="brcMenu" class="brc-nav">
        <a class="brc-link" href="index.html">Home</a>
        <a class="brc-link" href="birthCertificateApplyAdminView.html">Birth Registration Application</a>
        <a class="brc-link" href="vaccinationReminder.html">Vaccination</a>
        <a class="brc-link" href="reissue.html">Certificate Reissue</a>
        <a class="brc-link" href="correctionViewAdmin.html">Correction Request</a>
        <a class="brc-link" href="application_history.html">Application History</a>
        <a class="brc-link" href="login.html">Logout</a>
        <a class="brc-link active" href="dataAnalysis.html">Data Analysis</a>
      </nav>
    </div>
  </header>

  <div class="container-fluid p-4">
    <header class="mb-4 text-center">
      <h1 class="mb-2">ðŸ“Š Advanced Data Analysis â€” Birth Record Communication System</h1>
      <p class="text-muted">Uses large synthetic data mirroring the production schema; swap to DB/API later.</p>
    </header>

    <!-- === Charts grid (Fig 1â€“6) === -->
    <div class="row g-4">
      <!-- Fig 1 -->
      <div class="col-xl-6"><figure class="fig">
        <h6>Fig 1. Monthly gender trend</h6>
        <form id="f1" class="row g-2 mb-2">
          <div class="col"><input type="date" id="f1_from" class="form-control"></div>
          <div class="col"><input type="date" id="f1_to" class="form-control"></div>
          <div class="col">
            <select id="f1_loc" class="form-select"><option value="">All locations</option></select>
          </div>
          <div class="col-md-auto">
            <button class="btn btn-primary" type="button" data-action="apply">Apply</button>
            <button class="btn btn-outline-secondary" type="button" data-action="reset">Reset</button>
          </div>
        </form>
        <canvas id="stackedBarChart" class="canvas-tall"></canvas>
        <figcaption class="figcaption">Births per month split by gender.</figcaption>
      </figure></div>

      <!-- Fig 2 -->
      <div class="col-xl-6"><figure class="fig">
        <h6>Fig 2. Weight distribution</h6>
        <form id="f2" class="row g-2 mb-2">
          <div class="col"><input type="date" id="f2_from" class="form-control"></div>
          <div class="col"><input type="date" id="f2_to" class="form-control"></div>
          <div class="col">
            <select id="f2_gender" class="form-select">
              <option value="">All genders</option><option>Male</option><option>Female</option><option>Other</option>
            </select>
          </div>
          <div class="col-md-auto">
            <button class="btn btn-primary" type="button" data-action="apply">Apply</button>
            <button class="btn btn-outline-secondary" type="button" data-action="reset">Reset</button>
          </div>
        </form>
        <canvas id="weightBoxChart" class="canvas-medium"></canvas>
      </figure></div>

      <!-- Fig 3 -->
      <div class="col-xl-6"><figure class="fig">
        <h6>Fig 3. Temporal density heatmap</h6>
        <form id="f3" class="row g-2 mb-2">
          <div class="col"><input type="date" id="f3_from" class="form-control"></div>
          <div class="col"><input type="date" id="f3_to" class="form-control"></div>
          <div class="col-md-auto">
            <button class="btn btn-primary" type="button" data-action="apply">Apply</button>
            <button class="btn btn-outline-secondary" type="button" data-action="reset">Reset</button>
          </div>
        </form>
        <canvas id="heatmapChart" class="canvas-tall"></canvas>
      </figure></div>

      <!-- Fig 4 -->
      <div class="col-xl-6"><figure class="fig">
        <h6>Fig 4. Gestation vs weight</h6>
        <div class="tw-flex tw-flex-wrap tw-gap-2 tw-mb-2">
          <button class="tw-px-2 tw-py-1 tw-rounded-full tw-bg-indigo-50" data-f4-preset="last7d">Last 7d</button>
          <button class="tw-px-2 tw-py-1 tw-rounded-full tw-bg-indigo-50" data-f4-preset="last30d">Last 30d</button>
          <button class="tw-px-2 tw-py-1 tw-rounded-full tw-bg-indigo-50" data-f4-preset="all">All</button>
          <button class="tw-px-2 tw-py-1 tw-rounded-full tw-bg-blue-50" data-f4-gender="Male">Male</button>
          <button class="tw-px-2 tw-py-1 tw-rounded-full tw-bg-pink-50" data-f4-gender="Female">Female</button>
          <button class="tw-px-2 tw-py-1 tw-rounded-full tw-bg-violet-50" data-f4-gender="Other">Other</button>
        </div>
        <canvas id="scatterChart" class="canvas-tall"></canvas>
      </figure></div>

      <!-- Fig 5 -->
      <div class="col-xl-6"><figure class="fig">
        <h6>Fig 5. Gender composition</h6>
        <form id="f5" class="row g-2 mb-2">
          <div class="col"><input type="date" id="f5_from" class="form-control"></div>
          <div class="col"><input type="date" id="f5_to" class="form-control"></div>
          <div class="col-md-auto">
            <button class="btn btn-primary" type="button" data-action="apply">Apply</button>
            <button class="btn btn-outline-secondary" type="button" data-action="reset">Reset</button>
          </div>
        </form>
        <canvas id="genderPieChart" class="canvas-short"></canvas>
      </figure></div>

      <!-- Fig 6 -->
      <div class="col-xl-6"><figure class="fig">
        <h6>Fig 6. Location insights</h6>
        <div class="tw-grid tw-grid-cols-4 tw-gap-3 tw-mb-3">
          <div><div>Total</div><div id="fig6_total">â€”</div></div>
          <div><div>Male %</div><div id="fig6_male">â€”</div></div>
          <div><div>Female %</div><div id="fig6_female">â€”</div></div>
          <div><div>Other %</div><div id="fig6_other">â€”</div></div>
        </div>
        <canvas id="fig6_bar" class="canvas-short"></canvas>
      </figure></div>
    </div>

    <!-- DataTable -->
    <section class="card p-4 mt-4">
      <h4>ðŸ“‹ Detailed Birth Records</h4>
      <table id="advancedTable" class="table table-striped table-bordered">
        <thead><tr><th>Date</th><th>Gender</th><th>Weight</th><th>Gestation</th><th>Location</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>
  </div>

  <!-- JS Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.5/js/dataTables.bootstrap5.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Logic -->
  <script src="dataAnalysis.js"></script>
</body>
</html>
